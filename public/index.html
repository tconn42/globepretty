<!DOCTYPE HTML>
<html lang='en-US'>
<head>

  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, user-scalable=0, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta charset="utf-8">

  <meta http-equiv="CACHE-CONTROL" CONTENT="NO-CACHE">
  <meta http-equiv="PRAGMA" CONTENT="NO-CACHE">
  <meta name="robots" content="noarchive">
  <meta name="referrer" content="no-referrer">

  <title>Globe Pretty Demo</title>

  <style>
  body
  {
    margin: 0;
    user-select: none;
  }

  #globeViz
  {
    position: absolute;
    left: 0%;
    top: 0%;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    overflow: hidden;
  }
  </style>

  <script language="javascript" src="js/globe.gl.min.js"></script>
  <script type="module" src="dist/globepretty.js"></script>

  <script language="javascript">

    window.addEventListener('load', () => 
    {
      const container = document.getElementById('globeViz');

      // Gen random data
      let N = 10;
      const rings = [...Array(N).keys()].map(idx => ({
        lat: (idx/N - 0.5) * 180,
        lng: (idx/N - 0.5) * 360,
        maxR: idx/N * 20 + 3,
        propagationSpeed: (idx/N - 0.5) * 20 + 1,
        repeatPeriod: idx/N * 2000 + 200
      }));

      N = 100;
      const points = [...Array(N).keys()].map(idx => ({
        lat: (idx/N - 0.5) * 180,
        lng: (idx/N - 0.5) * 360,
        size: .3, // (100 - idx)/N / 3,
        color: ['red', 'white', 'blue', 'green'][idx%4]
      }));

      const colorInterpolator = t => `rgba(255,100,50,${Math.sqrt(1-t)})`;

      const opts = { };

      const globe = new Globe(container, opts)
        .ringsData(rings)
        .ringColor(() => colorInterpolator)
        .ringMaxRadius('maxR')
        .ringPropagationSpeed('propagationSpeed')
        .ringRepeatPeriod('repeatPeriod')
        .pointsData(points)
        .pointAltitude('size')
        .pointColor('color')
        .pointsMerge(true)
        .particleLat('lat')
        .particleLng('lng')
        .particleAltitude('alt')
        .particlesColor(() => 'palegreen')
        .onGlobeReady(() =>
         {
           setTimeout(() => container.style.visibility = 'visible', 20);

//setTimeout(() => globe.pointOfView({ lat: 51.50735, lng: -0.12776, altitude: .4 }, 5000), 5000);
//setTimeout(() => globe.pointOfView({ lat: 51.50735, lng: -0.12776, altitude: .02 }, 5000), 10000);

         });

    });

  </script>

</head>

<body style='background-color:black;'>
  <div id='globeViz' style='visibility:hidden;'></div>
</body>
</html>